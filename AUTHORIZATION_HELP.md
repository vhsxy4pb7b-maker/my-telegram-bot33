# Facebook 授权流程帮助

## 当前步骤

### ✅ 步骤 1: 登录 Facebook

1. **在浏览器中**，您应该看到 Facebook 登录页面
2. **输入您的 Facebook 账号和密码**
3. **点击"登录"按钮**

**如果遇到问题：**
- 确保使用的是正确的 Facebook 账号
- 检查网络连接
- 如果页面显示错误，告诉我具体错误信息

### ⏳ 步骤 2: 授权应用

登录成功后，您会看到授权页面，显示：

**应用请求的权限：**
- ✅ **pages_messaging** - 发送和接收消息
- ✅ **pages_read_engagement** - 读取页面互动数据  
- ✅ **pages_manage_metadata** - 管理页面元数据

**操作：**
1. 查看权限说明
2. 点击 **"继续"** 或 **"授权"** 按钮

**如果遇到问题：**
- 如果显示"权限被拒绝"，需要重新授权
- 如果页面卡住，刷新页面重试
- 如果显示错误，告诉我具体错误信息

### ⏳ 步骤 3: 获取访问令牌

授权成功后，浏览器会自动重定向到：

```
http://localhost:8000/oauth/callback#access_token=...
```

**回调页面会显示：**
- ✅ 访问令牌信息
- ✅ 令牌类型和过期时间
- ✅ 下一步操作提示

## 常见问题

### 问题 1: 页面显示"无法加载 URL"

**原因：** 应用域名未正确配置

**解决：**
1. 访问 Facebook Developer Console
2. 检查"应用域名"是否包含 `localhost`
3. 检查"网站 URL"是否为 `http://localhost:8000`

### 问题 2: 重定向 URI 不匹配

**原因：** 重定向 URI 未在应用中配置

**解决：**
1. 访问 Facebook Developer Console
2. 在"有效的 OAuth 重定向 URI"中添加：
   ```
   http://localhost:8000/oauth/callback
   ```

### 问题 3: 授权被拒绝

**原因：** 用户拒绝了授权

**解决：**
- 重新访问授权 URL
- 确保点击"授权"而不是"取消"

### 问题 4: 回调页面显示"等待重定向"

**原因：** 授权尚未完成

**解决：**
- 返回浏览器完成授权流程
- 确保点击了"授权"按钮

## 授权完成后

### 检查授权状态

运行检查脚本：
```bash
python check_oauth_status.py
```

### 提取访问令牌

如果看到了回调页面，运行：
```bash
python extract_token.py "完整的重定向URL"
```

### 配置到系统

令牌提取后会自动保存，或运行：
```bash
python configure_api_keys.py
```

## 需要帮助？

如果遇到任何问题，请告诉我：
1. 当前在哪个步骤
2. 看到了什么错误信息
3. 浏览器地址栏显示的 URL

我会帮您解决！

