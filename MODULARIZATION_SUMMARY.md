# ä»£ç æ¨¡å—åŒ–æ”¹è¿›æ€»ç»“

## ğŸ¯ æ”¹è¿›ç›®æ ‡

å°†ä»£ç é‡æ„ä¸ºæ¨¡å—åŒ–æ¶æ„ï¼Œä¾¿äºåæœŸå‡çº§å’Œç»´æŠ¤ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å·¥å…·æ¨¡å—åŒ– (`src/tools/`)

#### åˆ›å»ºçš„æ ¸å¿ƒæ¨¡å—ï¼š
- **`base.py`**: å·¥å…·åŸºç±»å’Œæ¥å£å®šä¹‰
  - `BaseTool`: æ‰€æœ‰å·¥å…·çš„åŸºç±»
  - `ToolResult`: ç»Ÿä¸€çš„è¿”å›ç»“æœæ ¼å¼
  - `ToolStatus`: çŠ¶æ€æšä¸¾

- **`registry.py`**: å·¥å…·æ³¨å†Œå™¨ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
  - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å·¥å…·
  - æ”¯æŒåŠ¨æ€æ³¨å†Œå’Œè·å–å·¥å…·

- **`cli.py`**: å‘½ä»¤è¡Œæ¥å£
  - æä¾›ç»Ÿä¸€çš„CLIå…¥å£
  - æ”¯æŒå‚æ•°è§£æå’Œç»“æœå±•ç¤º

- **`plugin_base.py`**: æ’ä»¶ç³»ç»Ÿ
  - `Plugin`: æ’ä»¶åŸºç±»
  - `PluginManager`: æ’ä»¶ç®¡ç†å™¨
  - æ”¯æŒä¾èµ–ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸ

#### å®ç°çš„å·¥å…·ï¼š
- **`token_manager.py`**: ä»¤ç‰Œç®¡ç†å·¥å…·
  - æå–ä»¤ç‰Œ
  - æ›´æ–°ç¯å¢ƒå˜é‡
  - æ ¼å¼åŒ–è¿‡æœŸæ—¶é—´

- **`config_checker.py`**: é…ç½®æ£€æŸ¥å·¥å…·
  - æ£€æŸ¥.envæ–‡ä»¶
  - éªŒè¯ç¯å¢ƒå˜é‡
  - æ£€æŸ¥Facebooké…ç½®

- **`permission_checker.py`**: æƒé™æ£€æŸ¥å·¥å…·
  - æ£€æŸ¥è®¿é—®ä»¤ç‰Œæƒé™
  - éªŒè¯å¿…éœ€æƒé™
  - è·å–ä»¤ç‰Œä¿¡æ¯

- **`exchange_token_tool.py`**: ä»¤ç‰Œäº¤æ¢å·¥å…·
  - çŸ­æœŸä»¤ç‰Œäº¤æ¢é•¿æœŸä»¤ç‰Œ
  - è‡ªåŠ¨è¯»å–é…ç½®
  - æ›´æ–°ç¯å¢ƒå˜é‡

### 2. é…ç½®æ¨¡å—åŒ– (`src/config/`)

#### æ¨¡å—ç»“æ„ï¼š
- **`settings.py`**: åº”ç”¨è®¾ç½®
  - ä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®
  - é…ç½®éªŒè¯å™¨
  - ç±»å‹å®‰å…¨

- **`loader.py`**: é…ç½®åŠ è½½å™¨
  - YAMLé…ç½®æ–‡ä»¶åŠ è½½
  - é”™è¯¯å¤„ç†

- **`validators.py`**: é…ç½®éªŒè¯å™¨
  - Facebooké…ç½®éªŒè¯
  - ç»Ÿä¸€éªŒè¯æ¥å£

- **`__init__.py`**: æ¨¡å—å¯¼å‡º
  - ç»Ÿä¸€æ¥å£
  - å‘åå…¼å®¹

### 3. å‘åå…¼å®¹

- ä¿æŒ `src/config.py` å‘åå…¼å®¹
- æ—§è„šæœ¬å¯ä»¥ç»§ç»­ä½¿ç”¨
- å¹³æ»‘è¿ç§»è·¯å¾„

## ğŸ“ æ–°çš„ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ tools/                    # å·¥å…·æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py              # å·¥å…·åŸºç±»
â”‚   â”œâ”€â”€ registry.py          # å·¥å…·æ³¨å†Œå™¨
â”‚   â”œâ”€â”€ cli.py               # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ plugin_base.py       # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ token_manager.py     # ä»¤ç‰Œç®¡ç†
â”‚   â”œâ”€â”€ config_checker.py    # é…ç½®æ£€æŸ¥
â”‚   â”œâ”€â”€ permission_checker.py # æƒé™æ£€æŸ¥
â”‚   â”œâ”€â”€ exchange_token_tool.py # ä»¤ç‰Œäº¤æ¢
â”‚   â””â”€â”€ README.md            # å·¥å…·æ–‡æ¡£
â”œâ”€â”€ config/                   # é…ç½®æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py          # åº”ç”¨è®¾ç½®
â”‚   â”œâ”€â”€ loader.py            # é…ç½®åŠ è½½å™¨
â”‚   â””â”€â”€ validators.py        # é…ç½®éªŒè¯å™¨
â””â”€â”€ config.py                # å‘åå…¼å®¹ï¼ˆä¿ç•™ï¼‰

examples/
â””â”€â”€ use_tools.py             # ä½¿ç”¨ç¤ºä¾‹ï¼ˆæ–°å¢ï¼‰

MODULAR_ARCHITECTURE.md       # æ¶æ„æ–‡æ¡£ï¼ˆæ–°å¢ï¼‰
MODULARIZATION_SUMMARY.md     # æœ¬æ–‡æ¡£ï¼ˆæ–°å¢ï¼‰
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ç¼–ç¨‹æ–¹å¼

```python
from src.tools import TokenManager, registry
import asyncio

async def main():
    # æ–¹å¼1ï¼šç›´æ¥ä½¿ç”¨
    manager = TokenManager()
    result = await manager.execute(action='extract', url='...')
    
    # æ–¹å¼2ï¼šé€šè¿‡æ³¨å†Œå™¨
    tool = registry.create_tool('token_manager')
    result = await tool.execute(action='extract', url='...')

asyncio.run(main())
```

### å‘½ä»¤è¡Œæ–¹å¼

```bash
# åˆ—å‡ºæ‰€æœ‰å·¥å…·
python -m src.tools.cli list

# ä½¿ç”¨å·¥å…·
python -m src.tools.cli token_manager --action extract --url "..."

# æŸ¥çœ‹å¸®åŠ©
python -m src.tools.cli help token_manager
```

## ğŸ¨ è®¾è®¡ä¼˜åŠ¿

### 1. æ¨¡å—åŒ–
- âœ… æ¯ä¸ªå·¥å…·ç‹¬ç«‹å®ç°
- âœ… æ¸…æ™°çš„æ¥å£å®šä¹‰
- âœ… æ˜“äºæµ‹è¯•å’Œç»´æŠ¤

### 2. å¯æ‰©å±•æ€§
- âœ… æ’ä»¶ç³»ç»Ÿæ”¯æŒåŠ¨æ€æ‰©å±•
- âœ… æ–°å·¥å…·åªéœ€å®ç°æ¥å£
- âœ… æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 

### 3. ç»Ÿä¸€æ¥å£
- âœ… æ‰€æœ‰å·¥å…·ä½¿ç”¨ç›¸åŒæ¥å£
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… ä¸€è‡´çš„è¿”å›æ ¼å¼

### 4. æ˜“äºå‡çº§
- âœ… å‘åå…¼å®¹
- âœ… å¹³æ»‘è¿ç§»
- âœ… ç‰ˆæœ¬ç®¡ç†

## ğŸ“ è¿ç§»æŒ‡å—

### ä»æ—§è„šæœ¬è¿ç§»

#### æ—§æ–¹å¼ï¼š
```python
from extract_token import extract_token_from_url
token_info = extract_token_from_url(url)
```

#### æ–°æ–¹å¼ï¼š
```python
from src.tools import TokenManager
manager = TokenManager()
result = await manager.execute(action='extract', url=url)
if result.is_success():
    token_info = result.data
```

## ğŸ”„ åç»­å‡çº§å»ºè®®

### 1. æ·»åŠ æ–°å·¥å…·
1. åˆ›å»ºå·¥å…·ç±»ç»§æ‰¿ `BaseTool`
2. å®ç° `execute` æ–¹æ³•
3. åœ¨æ³¨å†Œå™¨ä¸­æ³¨å†Œ

### 2. åˆ›å»ºæ’ä»¶
1. åˆ›å»ºæ’ä»¶ç±»ç»§æ‰¿ `Plugin`
2. å®ç° `get_tools` æ–¹æ³•
3. æ³¨å†Œåˆ°æ’ä»¶ç®¡ç†å™¨

### 3. æ‰©å±•é…ç½®
1. åœ¨ `settings.py` æ·»åŠ æ–°å­—æ®µ
2. åœ¨ `validators.py` æ·»åŠ éªŒè¯é€»è¾‘
3. æ›´æ–°æ–‡æ¡£

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ¨¡å—åŒ–æ¶æ„æ–‡æ¡£](MODULAR_ARCHITECTURE.md)
- [å·¥å…·æ¨¡å—æ–‡æ¡£](src/tools/README.md)
- [ä½¿ç”¨ç¤ºä¾‹](examples/use_tools.py)

## âœ¨ æ€»ç»“

é€šè¿‡æ¨¡å—åŒ–é‡æ„ï¼Œä»£ç ç°åœ¨å…·æœ‰ï¼š
- âœ… æ›´å¥½çš„ç»„ç»‡ç»“æ„
- âœ… æ›´å¼ºçš„å¯æ‰©å±•æ€§
- âœ… æ›´æ˜“ç»´æŠ¤
- âœ… æ›´æ˜“å‡çº§

æ‰€æœ‰æ”¹è¿›éƒ½ä¿æŒå‘åå…¼å®¹ï¼Œå¯ä»¥å¹³æ»‘è¿ç§»ã€‚




